<?xml version="1.0"?>
<!-- build file for JavaChecker project -->
<project name="JavaCheckerExternalChecks" default="check-all" basedir=".">


 <!-- set here location of ant (see ant.apache.org ) -->
 <property file="check-external.properties" />

 <!-- targets -->

 <target name="declareJavaChecker"  >
    <taskdef name="JavaChecker"  classname="ua.gradsoft.javachecker.ant.JavaCheckerTask">
     <classpath>
      <pathelement location="jsrc"/>
      <fileset dir="lib" includes="*.jar" />
      <pathelement location="${java.class.path}/"/>      
     </classpath>
    </taskdef>    
 </target>


 <target name="check-jetty" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="jchreport-jetty.txt" outputFormat="text" prefs="etc/prefs1.xml" debug="false" q="false" showFiles="false" >
    <input dir="${jetty.home}/modules/jetty/src/main/java" />
    <input dir="${jetty.home}/modules/util/src/main/java" />
    <classpath>
			<fileset dir="${jetty.home}/lib">
				<include name="*.jar" />
			</fileset>
    </classpath>
    <disable check="NamePatterns" />
    <!--<disable check="UnclosedCloseable" />-->
   </JavaChecker>
 </target>

 <target name="check-guice" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="jchreport-guice.txt" outputFormat="text" prefs="etc/prefs1.xml" debug="false" q="false" showFiles="false" >
    <input  dir="${guice.home}/src" />
    <classpath>
			<fileset dir="${guice.home}/lib">
				<include name="*.jar" />
				<include name="**/*.jar" />
			</fileset>
    </classpath>
    <disable check="NamePatterns" />
    <!--<disable check="UnclosedCloseable" />-->
   </JavaChecker>
 </target>

 <target name="check-jdk" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="jchreport-jdk.txt" outputFormat="text" prefs="etc/prefs1.xml" debug="true" q="false" showFiles="true" fork="true" >
    <jvmarg value="-Xmx512M" />
    <input  dir="${jdk.home}/src" />
    <disable check="NamePatterns" />
    <!--<disable check="UnclosedCloseable" />-->
    <!--<disable check="SwitchLabelWithoutBreak" />-->
   </JavaChecker>
 </target>

 <target name="check-all" depends="check-jetty,check-guice" />

 <target name="check-coin-jetty" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="coin-jetty.txt" 
                outputFormat="text" showFiles="false" 
                explicitEnabledOnly="true"
                >
    <input dir="${jetty.home}/modules/jetty/src/main/java" />
    <input dir="${jetty.home}/modules/util/src/main/java" />
    <classpath>
			<fileset dir="${jetty.home}/lib">
				<include name="*.jar" />
			</fileset>
    </classpath>
    
    <enable check="StringInSwitch" />
    <enable check="InstanceOfSwitch" />
    <enable check="ByteLiteral" />
    <enable check="MultiCatch" />
    <enable check="Elvis" />
    <enable check="LoopWithRemove" />
    <enable check="AllIfs" />
    <enable check="AllIntegerLiteral" />
    <enable check="BigIntegerLiteral" />
    <enable check="AllCatchs" />
    <enable check="CatchInFinally" />
    <enable check="ObjectSwitch" />
    <enable check="RethrowClause" />
    <enable check="WideningSyntax" />
    <enable check="WideningSemantics" />
    <enable check="AllBitAnds" />
   </JavaChecker>
 </target>

 <target name="check-coin-openjdk" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="coin-jdk.txt" 
                outputFormat="text" showFiles="true" 
                explicitEnabledOnly="true"
                >
    <input dir="${openjdk.home}/jdk/src/share/classes" />
    <input dir="${openjdk.home}/jaxp/src/share/classes" />
   <!--
    <classpath>
    </classpath>
   -->
    <enable check="StringInSwitch" />
    <enable check="InstanceOfSwitch" />
    <enable check="ByteLiteral" />
    <enable check="MultiCatch" />
    <enable check="Elvis" />
    <enable check="LoopWithRemove" />
    <enable check="AllIfs" />
    <enable check="BigIntegerLiteral" />
    <enable check="AllIntegerLiteral" />
    <enable check="AllCatchs" />
    <enable check="CatchInFinally" />
    <enable check="ObjectSwitch" />
    <enable check="RethrowClause" />
    <enable check="WideningSyntax" />
    <enable check="WideningSemantics" />
    <enable check="AllBitAnds" />
   </JavaChecker>
 </target>

 <target name="check-coin-gwt-user" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="coin-gwt-user.txt" 
                outputFormat="text" showFiles="true" 
                explicitEnabledOnly="true"
                >
    <input dir="${gwt.home}/user/src" />
    <input dir="${gwt.home}/user/super/com/google/gwt/emul" />
    <enable check="StringInSwitch" />
    <enable check="InstanceOfSwitch" />
    <enable check="ByteLiteral" />
    <enable check="MultiCatch" />
    <enable check="Elvis" />
    <enable check="LoopWithRemove" />
    <enable check="AllIfs" />
    <enable check="AllIntegerLiteral" />
    <enable check="BigIntegerLiteral" />
    <enable check="AllCatchs" />
    <enable check="CatchInFinally" />
    <enable check="ObjectSwitch" />
    <enable check="RethrowClause" />
    <enable check="WideningSyntax" />
    <enable check="WideningSemantics" />
    <enable check="AllBitAnds" />
   </JavaChecker>
 </target>

 <target name="check-coin-hibernate" depends="declareJavaChecker" >
   <JavaChecker jchhome="${basedir}" output="coin-hibernate.txt" 
                outputFormat="text" showFiles="true" 
                explicitEnabledOnly="true"
                >
    <input dir="${hibernate.home}/core/src/main/java" />
    <input dir="${hibernate.home}/annotations/src/main/java" />
    <input dir="${hibernate.home}/entitymanager/src/main/java" />
    <input dir="${hibernate.home}/commons-annotations/src/main/java" />
    <classpath>
     <pathelement location="${j2ee.jar}" />
    </classpath>
    <enable check="StringInSwitch" />
    <enable check="InstanceOfSwitch" />
    <enable check="ByteLiteral" />
    <enable check="AllIntegerLiteral" />
    <enable check="BigIntegerLiteral" />
    <enable check="MultiCatch" />
    <enable check="Elvis" />
    <enable check="LoopWithRemove" />
    <enable check="AllIfs" />
    <enable check="AllCatchs" />
    <enable check="CatchInFinally" />
    <enable check="ObjectSwitch" />
    <enable check="RethrowClause" />
    <enable check="WideningSyntax" />
    <enable check="WideningSemantics" />
    <enable check="AllBitAnds" />
   </JavaChecker>
 </target>

</project>
